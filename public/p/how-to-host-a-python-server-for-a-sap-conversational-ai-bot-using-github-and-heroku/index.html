<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="A step by step tutorial to take your chatbot to the next level">
<title>How to host a Python server for a SAP Conversational AI bot using Github and Heroku</title>

<link rel='canonical' href='http://localhost:1313/p/how-to-host-a-python-server-for-a-sap-conversational-ai-bot-using-github-and-heroku/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="How to host a Python server for a SAP Conversational AI bot using Github and Heroku">
<meta property='og:description' content="A step by step tutorial to take your chatbot to the next level">
<meta property='og:url' content='http://localhost:1313/p/how-to-host-a-python-server-for-a-sap-conversational-ai-bot-using-github-and-heroku/'>
<meta property='og:site_name' content='TokenBrice'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Chatbot' /><meta property='article:tag' content='Python' /><meta property='article:tag' content='Cryptos' /><meta property='article:published_time' content='2017-11-23T13:21:53&#43;00:00'/><meta property='article:modified_time' content='2017-11-23T13:21:53&#43;00:00'/><meta property='og:image' content='http://localhost:1313/img/2017/sato/satodemo.gif' />
<meta name="twitter:site" content="@TokenBrice">
    <meta name="twitter:creator" content="@TokenBrice"><meta name="twitter:title" content="How to host a Python server for a SAP Conversational AI bot using Github and Heroku">
<meta name="twitter:description" content="A step by step tutorial to take your chatbot to the next level"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='http://localhost:1313/img/2017/sato/satodemo.gif' />
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    <img src="/img/main/emblem-color-square.png" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                </a>
                
                    <span class="emoji">üêú</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">TokenBrice</a></h1>
            <h2 class="site-description">Brutally Honest DeFi</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://x.com/tokenbrice'
                        target="_blank"
                        title="X"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="http://localhost:1313/" selected>English</option>
                                
                                    <option value="http://localhost:1313/fr/" >Fran√ßais</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#meet-sato-the-cryptobot"><strong>Meet SATO, the cryptobot</strong></a></li>
    <li><a href="#what-are-we-building-today"><strong>What are we building today?</strong></a>
      <ol>
        <li><a href="#i-github"><strong>I/ GITHUB</strong></a>
          <ol>
            <li><a href="#1-git-in-three-lines"><strong>1. GIT IN THREE LINES</strong></a></li>
            <li><a href="#2-getting-gitbash"><strong>2. GETTING GITBASH</strong></a></li>
            <li><a href="#3-identification-global"><strong>3. IDENTIFICATION (GLOBAL)</strong></a></li>
            <li><a href="#4-directories"><strong>4. DIRECTORIES</strong></a></li>
            <li><a href="#5-first-git-push"><strong>5. FIRST GIT PUSH</strong></a></li>
          </ol>
        </li>
        <li><a href="#ii-preparing-for-heroku-required-files"><strong>II/ PREPARING FOR HEROKU: REQUIRED FILES</strong></a>
          <ol>
            <li><a href="#1-requirementstxt"><strong>1. REQUIREMENTS.TXT</strong></a></li>
            <li><a href="#2-procfile"><strong>2. PROCFILE</strong></a></li>
            <li><a href="#3-appjson"><strong>3. APP.JSON</strong></a></li>
          </ol>
        </li>
        <li><a href="#iii-preparing-for-heroku-python-server-modifications"><strong>III/ PREPARING FOR HEROKU: PYTHON SERVER MODIFICATIONS</strong></a>
          <ol>
            <li><a href="#1-switching-from-port-5000-to-a-port-defined-as-environment-variable"><strong>1. SWITCHING FROM PORT 5000 TO A PORT DEFINED AS ENVIRONMENT VARIABLE</strong></a></li>
            <li><a href="#2-changing-the-host"><strong>2. CHANGING THE HOST</strong></a></li>
            <li><a href="#3-pushing-the-new-files-to-our-github-repo"><strong>3. PUSHING THE NEW FILES TO OUR GITHUB REPO</strong></a></li>
          </ol>
        </li>
        <li><a href="#iv-githeroku"><strong>IV/ GIT+HEROKU</strong></a>
          <ol>
            <li><a href="#1-deployment-on-heroku"><strong>1. DEPLOYMENT ON HEROKU</strong></a></li>
            <li><a href="#2-connecting-your-heroku-app-to-sap-conversational-ai"><strong>2. CONNECTING YOUR HEROKU APP TO SAP Conversational AI</strong></a></li>
          </ol>
        </li>
        <li><a href="#v-test-and-debug"><strong>V/ TEST AND DEBUG</strong></a>
          <ol>
            <li><a href="#1-accessing-herokus-logs"><strong>1. ACCESSING HEROKU‚ÄôS LOGS</strong></a></li>
            <li><a href="#2-common-issues"><strong>2. COMMON ISSUES:</strong></a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/how-to-host-a-python-server-for-a-sap-conversational-ai-bot-using-github-and-heroku/">
                
                    <img src="/img/2017/sato/satodemo.gif" loading="lazy" alt="Featured image of post How to host a Python server for a SAP Conversational AI bot using Github and Heroku" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/tutorial/" style="background-color: #2a9d8f; color: #fff;">
                Tutorial
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/how-to-host-a-python-server-for-a-sap-conversational-ai-bot-using-github-and-heroku/">How to host a Python server for a SAP Conversational AI bot using Github and Heroku</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            A step by step tutorial to take your chatbot to the next level
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Nov 23, 2017</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    12 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>In the previous tutorial, we learnt how to host our own server for our bot, so he would be able to <strong>fetch data from third party APIs</strong> and return it to its users. Alas, the Python server made in the last tutorial was <strong>self-hosted</strong>: you had to run it on your own computer, using ngrok to expose one of your ports to the internet.</p>
<p>If you closed the terminal running the script, or turned off the computer, the server was shut down and  your bot left unable to reply. Hopefully, thanks to services such as <a class="link" href="https://www.heroku.com/"  target="_blank" rel="noopener"
    >Heroku</a> it‚Äô easy to get started with servers.</p>
<p><a class="link" href="https://cai.tools.sap/blog/python-cryptobot/"  target="_blank" rel="noopener"
    >Want to start from the beginning? Check the first tutorial on Sato: How to build a bot able to fetch data from external APIs</a></p>
<h2 id="meet-sato-the-cryptobot"><strong>Meet SATO, the cryptobot</strong>
</h2><p>Here‚Äôs the end-result of what we‚Äôll build today: a cryptobot aka a chatbot able to fetch any cryptocurrency price.</p>
<p>What you‚Äôll have by the end of this tutorial</p>
<p>In a rush? Here is all you need to build your own:</p>
<ul>
<li><a class="link" href="https://cai.tools.sap/ahirice/sato-cryptobot/train/?utm_source=blog&amp;utm_campaign=sato"  target="_blank" rel="noopener"
    >The bot on SAP Conversational AI</a> and</li>
<li><a class="link" href="https://github.com/Ahirice/sato/"  target="_blank" rel="noopener"
    >The GitHub repository</a></li>
</ul>
<p>Need to see it to believe it? That‚Äôs wise!</p>
<p><a class="link" href="https://www.messenger.com/t/satofolio"  target="_blank" rel="noopener"
    ><img src="/img/2017/sato/messenger-button-1.png"
	
	
	
	loading="lazy"
	
		alt="chat-on-messenger"
	
	
></a></p>
<p>Or if you would rather understand how it was made, go through with the tutorial.</p>
<h2 id="what-are-we-building-today"><strong>What are we building today?</strong>
</h2><p>Today, we‚Äôre taking <strong>the next step to ensure permanent availability of your bot</strong>. By the end of this tutorial, you‚Äôll have your bot server hosted on <a class="link" href="https://www.heroku.com/"  target="_blank" rel="noopener"
    >Heroku</a> and always available, 24/24, 7/7.</p>
<p>This implies some extra steps:</p>
<ol>
<li>Hosting your code on a Github repo</li>
<li>Modifying our server code for Heroku</li>
<li>Adding extra files to match Heroku‚Äôs requirements</li>
<li>Connecting the Github repo and the Heroku app</li>
<li>Test and debug</li>
</ol>
<p><a class="link" href="https://www.heroku.com/"  target="_blank" rel="noopener"
    >Heroku</a> is nicely integrated with <a class="link" href="https://github.com/"  target="_blank" rel="noopener"
    >GitHub</a> so this is where the code will be hosted.</p>
<h3 id="i-github"><strong>I/ GITHUB</strong>
</h3><p>This section will focus on using GitHub Bash/CLI (Command Line Interface) to host our code. <strong>You can skip this step all together using the visual interface</strong> on <a class="link" href="https://www.github.com"  target="_blank" rel="noopener"
    >GitHub website</a>.</p>
<h4 id="1-git-in-three-lines"><strong>1. GIT IN THREE LINES</strong>
</h4><p>Github has two major interest for developers: first, it tremendously <strong>facilitates collaboration</strong>. Secondly, it smoothly handles <strong>file versioning.</strong> Even if these two advantages may seem remote to you for now, it‚Äôs worth it to learn good habits right from the start: GitHub is now a standard.</p>
<h4 id="2-getting-gitbash"><strong>2. GETTING GITBASH</strong>
</h4><p><a class="link" href="https://git-scm.com/download/win"  target="_blank" rel="noopener"
    >You can get Git Bash from here.</a></p>
<p><em>Note: In the first tutorial, I mentioned about using <a class="link" href="https://chocolatey.org/"  target="_blank" rel="noopener"
    >Chocolatey</a> on Windows for package management. If you did so, you can install Git simply by inputting <code>choco install git</code> in a terminal.</em></p>
<p>Not only will it  install Git, but it will also add it to your system‚Äôs path, allowing you to call Git from any terminal. Unlike Ngrok, the Git installer can also add Git to your system path so here choosing between the two  installation methods is a matter of preferences.</p>
<h4 id="3-identification-global"><strong>3. IDENTIFICATION (GLOBAL)</strong>
</h4><p>Before we starting manipulating  files with Git, we‚Äôll need to set up our email and username. They can be set at a global level or at a directory level. For the sake of  simplicity, we‚Äôll set them at a the global level:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">git config --global user.email &#34;email@example.com&#34;
</span></span><span class="line"><span class="cl">git config --global user.name &#34;bobby&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can confirm both by using the same command without any value:</p>
<p><img src="/img/2017/sato/gitconfigconfirm.png"
	
	
	
	loading="lazy"
	
		alt="github repo - git user config"
	
	
></p>
<p>Verifying username config on GitHub CLI</p>
<h4 id="4-directories"><strong>4. DIRECTORIES</strong>
</h4><p>Next, we need to open our project directory (locally). There are many ways to do it.</p>
<p>Using the CLI, you can move between folders with the <code>cd</code> command. You can use tab to autocomplete your input in order to speed up the process:</p>
<p><img src="/img/2017/sato/cdtabs.gif"
	
	
	
	loading="lazy"
	
		alt="github repo - Navigating folders using CLI"
	
	
></p>
<p>Navigating folders using CLI</p>
<p>If you need to create a new folder, use the <code>mkdir foldername</code> command</p>
<p>You can also go to your folder using the explorer, and then open a console at the location with SHIFT+Right Click -&gt; <code>Open Powershell Window Here</code></p>
<p>Now that we have our folder, let‚Äôs say /git/ for instance, you can add the file you want to push to GitHub in it. For now, let‚Äôs push the server file from the previous tutorial.</p>
<p>First, make sure you are in the right directory in your terminal. Here‚Äôs where I‚Äôm at:</p>
<p><img src="/img/2017/sato/beforegit.jpg"
	
	
	
	loading="lazy"
	
		alt="github repo - Preparing for the push"
	
	
></p>
<p>Preparing for the push</p>
<h4 id="5-first-git-push"><strong>5. FIRST GIT PUSH</strong>
</h4><p>A git push has several stages.  First, you add files to the commit. Then, you commit the changes.  Finally, it‚Äôs time to push the changes to the remote origin (the GitHub  repo).</p>
<ol>
<li>To get started, let‚Äôs initialize our local repository (/git/ on my screenshot) as a Git repository: <code>git init</code></li>
<li>Now, we add the file we wants to push (server.py): <code>git add server.py </code><em>Note: you can add all files in your local repository with the following command: <code>git add .</code></em></li>
<li>Then, we commit our changes. To easily keep track of our changes, try to be concise and descriptive in your message:<code>git commit -m &quot;First server.py commit&quot;</code></li>
<li>We‚Äôre now almost  ready to push, once we tell GitHub which repository we want to push our  files into. In GitBash language, that‚Äôs the ORIGIN:<code>git remote add origin https://github.com/Ahirice/sato</code>
<em>Don‚Äôt forget to replace the origin URL with your own github repo.</em></li>
<li>And verify it:<code>git remote -v </code><em>Your repository URL (<a class="link" href="https://github.com/Ahirice/sato"  target="_blank" rel="noopener"
    >https://github.com/Ahirice/sato</a> for me here) is displayed at the top of the repository Quick Setup  page. If you repository is already published, the repo URL is the URL  you use to access it on GitHub.</em></li>
<li>Everything is set up, now it‚Äôs time to finally push: <code>git push origin master</code></li>
</ol>
<p>Here is the whole process in a GIF:</p>
<p><img src="/img/2017/sato/gitpush.gif"
	
	
	
	loading="lazy"
	
		alt="github repo - GitHub push GIF"
	
	
></p>
<p>GitHub push GIF</p>
<p>Success! And here went the first push to our GitHub repo, feels good right?</p>
<p><img src="/img/2017/sato/1out5.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
<p>*<strong>Step 1/5 ‚Äì Hosting the code on a GitHub repo*</strong></p>
<h3 id="ii-preparing-for-heroku-required-files"><strong>II/ PREPARING FOR HEROKU: REQUIRED FILES</strong>
</h3><p>Before we deploy, we need to add  some files to our repository that Heroku requires. Moreover, we‚Äôll have  to adjust our server.py script slightly to make it work on this new  configuration. Let‚Äôs start with the required files:</p>
<h4 id="1-requirementstxt"><strong>1. REQUIREMENTS.TXT</strong>
</h4><p>During the first tutorial, we installed Requests and Flask using pip. For our remote server to work, <strong>it will need these two libraries</strong>. This is precisely what the requirements.txt file is about.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Flask==0.12.2
</span></span><span class="line"><span class="cl">requests==2.18.4
</span></span></code></pre></td></tr></table>
</div>
</div><p>Heroku will process the  requirements.txt and install any library listed here in the virtual  environment used to run your server. The whole process is automatic, you just need to make sure all your script requirements are listed here.</p>
<p><em>Note: The state of the art process would have been to create a virtual environment  before we began any coding. Then, when deploying to Heroku, we would  have frozen our virtual environment requirements to populate our  requirements.txt file. For the sake of simplicity, we kept things a  little bit easier than they should be.</em></p>
<h4 id="2-procfile"><strong>2. PROCFILE</strong>
</h4><p>The procfile is a  text file that must be in the root directory of your application. It  states the command executed to start your app.</p>
<p>During the first tutorial, we started our local server with <code>python server.py</code>. Here, the command is almost the same. We just need to explicitly state  the process type (web) for Heroku, so here‚Äôs what we write in our  Procfile:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">web: python server.py
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="3-appjson"><strong>3. APP.JSON</strong>
</h4><p>The app.json file is used to  declare standard information about your application, including: name,  images, addons environment variables‚Ä¶ <a class="link" href="https://devcenter.heroku.com/articles/app-json-schema"  target="_blank" rel="noopener"
    >Heroku offers a comprehensive resource </a>explaining how this file is structured, we invite you to check it if you want to dig deeper.</p>
<p>For now, we‚Äôll just use a basic app.json:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;name&#34;: &#34;Sato crypto bot&#34;,
</span></span><span class="line"><span class="cl">  &#34;description&#34;: &#34;The server side for Sato.&#34;,
</span></span><span class="line"><span class="cl">  &#34;image&#34;: &#34;heroku/python&#34;,
</span></span><span class="line"><span class="cl">  &#34;repository&#34;: &#34;https://github.com/Ahirice/sato&#34;,
</span></span><span class="line"><span class="cl">  &#34;keywords&#34;: [&#34;python&#34;, &#34;flask&#34; ],
</span></span><span class="line"><span class="cl">  &#34;addons&#34;: [ &#34;heroku-postgresql&#34; ],
</span></span><span class="line"><span class="cl">  &#34;environments&#34;: {
</span></span><span class="line"><span class="cl">    &#34;test&#34;: {
</span></span><span class="line"><span class="cl">      &#34;scripts&#34;: {
</span></span><span class="line"><span class="cl">        &#34;test&#34;: &#34;server.py test&#34;
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>Don‚Äôt forget to at least <strong>edit the repository key value to match your own GitHub repo</strong>. The rest can stay the same.</p>
<p><img src="/img/2017/sato/2out5.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
<p><strong>Step 2/5 ‚Äì Adding Heroku required files</strong></p>
<h3 id="iii-preparing-for-heroku-python-server-modifications"><strong>III/ PREPARING FOR HEROKU: PYTHON SERVER MODIFICATIONS</strong>
</h3><p>Our server file need slights adjustments to work on Heroku. You can find both files on the GitHub repo:</p>
<ul>
<li><strong>server.py</strong> is the server script used on Heroku</li>
<li><strong>server-self-run.py:</strong> is the script we used in the first tutorial (and ran ourselves with ngrok)</li>
</ul>
<p>Essentially, we just need to modify the port and the host of our app. Here‚Äôs how:</p>
<h4 id="1-switching-from-port-5000-to-a-port-defined-as-environment-variable"><strong>1. SWITCHING FROM PORT 5000 TO A PORT DEFINED AS ENVIRONMENT VARIABLE</strong>
</h4><p>The first and the biggest change we have to do is to <strong>modify the port used by our webapp.</strong></p>
<p>In the first tutorial, we hardcoded the port in our script (<code>port = &quot;5000&quot;</code> [line6 in server-self-run.py]). This time, <strong>we‚Äôll need to define the port as an environment variable</strong> (Heroku requirement). Hopefully, this is done in two simple steps:</p>
<ol>
<li>First, to access environment variables in Python, we‚Äôll be using the <code>os.environ</code> function . It means we must import os. [line 4 in server.py].</li>
<li>Then, we need to adapt the line were we define the port: <code>os.environ[&quot;PORT&quot;]</code> fetch the value of the environment variable named ‚ÄúPORT‚Äù: we‚Äôre almost there. Since <strong>ports are integers</strong> (=whole number which can be positive, negative or null), we must ensure the port we fetch is indeed one.</li>
</ol>
<p><img src="/img/2017/sato/integers.png"
	
	
	
	loading="lazy"
	
		alt="github repo"
	
	
></p>
<p>Testing the int() function</p>
<p>To do so, we encapsulate our query in the <code>int()</code> function. Therefore, our port is now defined as it follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">port = int(os.environ[&#34;PATH&#34;])
</span></span></code></pre></td></tr></table>
</div>
</div><p><em>Note: Although  we have to import os in our script, it‚Äôs not needed in the  requirements.txt. Indeed, os is one of the base python library, such as <a class="link" href="https://docs.python.org/3/library/time.html"  target="_blank" rel="noopener"
    >time</a> or <a class="link" href="https://docs.python.org/3/library/sys.html"  target="_blank" rel="noopener"
    >sys</a>: these libraries are available as soon as Python is installed.</em></p>
<h4 id="2-changing-the-host"><strong>2. CHANGING THE HOST</strong>
</h4><p>There is one last change to do  before our server.py is ready. To expose our flask app to the internet  (so it can accepts connection from remote sources instead of just local  ones), <a class="link" href="http://flask.pocoo.org/docs/0.12/quickstart/#public-server"  target="_blank" rel="noopener"
    >we must set its host as ‚Äú0.0.0.0.‚Äù.</a> We just need to change the very last line of our script:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">app.run(port=port, host=&#34;0.0.0.0&#34;)
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="3-pushing-the-new-files-to-our-github-repo"><strong>3. PUSHING THE NEW FILES TO OUR GITHUB REPO</strong>
</h4><p>During the last two steps, we modified server.py and created requirements.txt, procfile and app.json.</p>
<p>Before we move forward with the fifth and last step of the tutorial, <strong>we need to push these changes to our repo</strong>. Hopefully, we‚Äôre now familiar with GitHub‚Äôs process. If you have some  doubts about the process here, please refer to the first step of this  tutorial.</p>
<p>Once we have the updated and newly created files on our GitHub repo, we are ready to deploy to Heroku.</p>
<p><img src="/img/2017/sato/3out5.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
<p>*<strong>Step 3/5 ‚Äì Adapting the server script for Heroku*</strong></p>
<h3 id="iv-githeroku"><strong>IV/ GIT+HEROKU</strong>
</h3><p>Now, that we‚Äôve been through the  Git process, it‚Äôs time for some good news. Heroku offers an easy and  potent GitHub integration: once your connect the two accounts, <strong>new files pushed on the master repository on GitHub will be automatically deployed to Heroku</strong> (unless you rather do it manually).</p>
<p><em>Note: If the  CLI grew on you, or you would rather not connect your Github and Heroku  accounts, Heroku also offers a CLI to deploy your servers. It won‚Äôt be  covered in this tutorial, so we recommend you check <a class="link" href="https://devcenter.heroku.com/articles/getting-started-with-python"  target="_blank" rel="noopener"
    >Heroku‚Äôs Getting Started</a> guide if you want to do it this way.</em></p>
<h4 id="1-deployment-on-heroku"><strong>1. DEPLOYMENT ON HEROKU</strong>
</h4><p>The account creation process on  Heroku as it‚Äôs straightforward so we won‚Äôt detail it. Once you have you  account, create a new app, and connect to your GitHub account to deploy  it automatically. Just follow the GIF:</p>
<p><img src="/img/2017/sato/herokudeploy.gif"
	
	
	
	loading="lazy"
	
		alt="github repo - Deployment options on Heroku"
	
	
></p>
<p>Deployment options on Heroku</p>
<p>Once automatic deployment is active, every time you push to your GitHub repo, Heroku will deploy the new files to your server.</p>
<p>If you would rather deploy  manually but still benefits from the convenience offered by the  GitHub&lt;-&gt;Heroku integration, you can use the Manual Deploy option  (click on the <code>Deploy Branch</code> button). If you do so, remember to go back on Heroku and click this button every time you update your code. Here‚Äôs a GIF:</p>
<h4 id="2-connecting-your-heroku-app-to-sap-conversational-ai"><strong>2. CONNECTING YOUR HEROKU APP TO SAP Conversational AI</strong>
</h4><p>Once your app is deployed on Heroku, the only thing left to do is to tell SAP Conversational AI where to find it.</p>
<ol>
<li>Go on your app on Heroku, on the  settings tab, and scroll down to the Domain and Certificates section.  Under the domain entry, your app endpoint is displayed. Essentially,  it‚Äôs your app name (on Heroku) .herokuapp.com. Copy it.</li>
<li>Now go back on SAP Conversational AI, in settings, and paste your Heroku app URL in the Bot Base URL field.</li>
</ol>
<p><img src="/img/2017/sato/4out5.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
<p><em>Step 4/5 ‚Äì Push deploy the new server on Heroku</em></p>
<h3 id="v-test-and-debug"><strong>V/ TEST AND DEBUG</strong>
</h3><p>Now, before we go on Messenger to  test our bot, let‚Äôs access the logs. They‚Äôll prove helpful if you don‚Äôt  get it working right the first time.</p>
<h4 id="1-accessing-herokus-logs"><strong>1. ACCESSING HEROKU‚ÄôS LOGS</strong>
</h4><p>You have two main ways of accessing Heroku‚Äôs logs:</p>
<p><strong>From Heroku website</strong>: if you click on the More button, at the top left on Heroku, you can access your server logs.</p>
<p><strong>From any terminal:</strong> if you have installed <a class="link" href="https://devcenter.heroku.com/articles/heroku-cli"  target="_blank" rel="noopener"
    >Heroku CLI</a> (available on Chocolatey of course), you can access your logs from any terminal.</p>
<p>You can access the logs in real time with the following command:</p>
<p><a class="link" href="https://mk0caiblog1h3pefaf7c.kinstacdn.com/wp-content/uploads/2017/12/commandsato.png"  target="_blank" rel="noopener"
    ><img src="/img/2017/sato/commandsato.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></a></p>
<p><img src="/img/2017/sato/5out5.png"
	
	
	
	loading="lazy"
	
		alt="img"
	
	
></p>
<p>*<strong>Step 5/5 ‚Äì Running the server script and accessing the logs*</strong></p>
<p>With access to the logs, we‚Äôll have all we need to debug in case of a faulty script. Let‚Äôs have a look at the common issues:</p>
<h4 id="2-common-issues"><strong>2. COMMON ISSUES:</strong>
</h4><p><strong>TRAILING / IN BOT BASE URL</strong></p>
<p><img src="/img/2017/sato/301.png"
	
	
	
	loading="lazy"
	
		alt="github repo - Common issues, trailing /"
	
	
></p>
<p>Errors raised by an extra trailing slash</p>
<p>Since we set up the webhook our bot call as <code>/</code>, we must make sure the the bot base URL address we pasted does not have an ending /: <code>https://flask-sato-server.herokuapp.com</code>. Here on the screen, we have a trailing slash in the bot base URL, which leads to a POST request on <code>https://flask-sato-server.herokuapp.com//</code> unable to be processed triggering a redirect (301) and method not allowed (405) errors.</p>
<p><strong>NO RESPONSE ON SERVER AND NGROK</strong></p>
<p>If nothing happens both on your  server and on ngrok, it means SAP Conversational AI can‚Äôt reach it. It‚Äôs most certainly due to a typo in the bot base URL, or the complete lack  of it.</p>
<p><strong>SLOW RESPONSE TIME</strong></p>
<p>Heroku put your app to sleep when they‚Äôve been inactive for a while. Hence, the first user  who aks a crypto price after a long downtime might wait a while. You can upgrade your account to avoid this, or make another script to keep your bot server always up. It‚Äôs a great follow-up exercise.</p>
<p>You‚Äôre very welcome to contact us if you need help, trough the comment section below or via <a class="link" href="https://slack.cai.tools.sap/"  target="_blank" rel="noopener"
    >Slack</a>.</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/chatbot/">Chatbot</a>
        
            <a href="/tags/python/">Python</a>
        
            <a href="/tags/cryptos/">Cryptos</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            Last updated on Nov 23, 2017 13:21 UTC
        </span>
    </section></footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/how-to-build-a-cryptobot-in-python-able-to-fetch-data-from-external-apis/">
        
        
            <div class="article-image">
                
                    <img src="/img/2017/sato/satodemo.gif" loading="lazy" data-key="" data-hash="/img/2017/sato/satodemo.gif"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">How To Build A Cryptobot In Python Able To Fetch Data From External APIs</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/exploring-and-industry-finding-content-ideas-a-matter-of-tools/">
        
        
            <div class="article-image">
                
                    <img src="/img/2017/seo-tools/cover.png" loading="lazy" data-key="" data-hash="/img/2017/seo-tools/cover.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Exploring and Industry &amp; Finding Content Ideas: a matter of tools?</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/reddit-and-reddit-ads-hitchhikers-guide/">
        
        
            <div class="article-image">
                
                    <img src="/img/2017/reddit/cover.png" loading="lazy" data-key="" data-hash="/img/2017/reddit/cover.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Reddit and Reddit Ads Hitchhiker‚Äôs Guide</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2018 - 
        
        2025 Example Person
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.e87374ab760d28dfa333a671a892b101964bde5a2dac9100a50c9b0d779b4505.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
